{"version":3,"sources":["../src/react.tsx","../src/Logout.tsx"],"sourcesContent":["export { UserProfileDropdown } from './Logout'\n","// components/UserProfileDropdown.tsx\n'use client'\n\nimport { useState, useRef, useEffect } from 'react'\n\ninterface UserProfileDropdownProps {\n    userName?: string | null\n}\n\nexport function UserProfileDropdown({ userName }: UserProfileDropdownProps) {\n    const [isOpen, setIsOpen] = useState(false)\n    const [isLoading, setIsLoading] = useState(false)\n    const [dropdownPosition, setDropdownPosition] = useState({ top: 0, right: 0 })\n    const buttonRef = useRef<HTMLButtonElement>(null)\n    const dropdownRef = useRef<HTMLDivElement>(null)\n\n    const handleLogout = async () => {\n        setIsLoading(true)\n        await logout()\n    }\n\n    const handleToggle = () => {\n        if (!isOpen && buttonRef.current) {\n            const rect = buttonRef.current.getBoundingClientRect()\n            setDropdownPosition({\n                top: rect.bottom + 8,\n                right: window.innerWidth - rect.right\n            })\n        }\n        setIsOpen(!isOpen)\n    }\n\n    // Close dropdown when clicking outside\n    useEffect(() => {\n        function handleClickOutside(event: MouseEvent) {\n            if (\n                dropdownRef.current &&\n                !dropdownRef.current.contains(event.target as Node) &&\n                buttonRef.current &&\n                !buttonRef.current.contains(event.target as Node)\n            ) {\n                setIsOpen(false)\n            }\n        }\n        document.addEventListener('mousedown', handleClickOutside)\n        return () => document.removeEventListener('mousedown', handleClickOutside)\n    }, [])\n\n    return (\n        <div className=\"relative\">\n            <button\n                ref={buttonRef}\n                onClick={handleToggle}\n                className=\"flex items-center gap-2 px-3 py-2 rounded-md hover:bg-gray-800 transition-colors cursor-pointer\"\n            >\n                {/* User Icon */}\n                <svg\n                    className=\"w-8 h-8 text-gray-300\"\n                    fill=\"currentColor\"\n                    viewBox=\"0 0 24 24\"\n                >\n                    <path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z\" />\n                </svg>\n                {userName && (\n                    <span className=\"text-gray-300 text-sm\">{userName}</span>\n                )}\n                {/* Dropdown Arrow */}\n                <svg\n                    className={`w-4 h-4 text-gray-400 transition-transform ${isOpen ? 'rotate-180' : ''}`}\n                    fill=\"none\"\n                    stroke=\"currentColor\"\n                    viewBox=\"0 0 24 24\"\n                >\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n                </svg>\n            </button>\n\n            {/* Dropdown Menu */}\n            {isOpen && (\n                <div\n                    ref={dropdownRef}\n                    style={{ top: dropdownPosition.top, right: dropdownPosition.right }}\n                    className=\"fixed w-48 bg-gray-800 rounded-md shadow-lg border border-gray-700 z-50\"\n                >\n                    <button\n                        onClick={handleLogout}\n                        disabled={isLoading}\n                        className=\"w-full flex items-center gap-2 px-4 py-2 text-left text-gray-300 hover:bg-gray-700 rounded-md transition-colors cursor-pointer disabled:opacity-50\"\n                    >\n                        <svg\n                            className=\"w-4 h-4\"\n                            fill=\"none\"\n                            stroke=\"currentColor\"\n                            viewBox=\"0 0 24 24\"\n                        >\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1\" />\n                        </svg>\n                        {isLoading ? 'Logging out...' : 'Logout'}\n                    </button>\n                </div>\n            )}\n        </div>\n    )\n}\n\n\nasync function logout() {\n    // 1. Clear the httpOnly cookie via server-side API route\n    await fetch('/api/logout', {\n        method: 'POST'\n    })\n\n    // 2. Clear local token storage (if any)\n    localStorage.removeItem('access_token')\n\n    // 3. Redirect to home (middleware will redirect to login if needed)\n    window.location.href = '/'\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;;;ACGA,mBAA4C;AA+ChC;AAzCL,SAAS,oBAAoB,EAAE,SAAS,GAA6B;AACxE,QAAM,CAAC,QAAQ,SAAS,QAAI,uBAAS,KAAK;AAC1C,QAAM,CAAC,WAAW,YAAY,QAAI,uBAAS,KAAK;AAChD,QAAM,CAAC,kBAAkB,mBAAmB,QAAI,uBAAS,EAAE,KAAK,GAAG,OAAO,EAAE,CAAC;AAC7E,QAAM,gBAAY,qBAA0B,IAAI;AAChD,QAAM,kBAAc,qBAAuB,IAAI;AAE/C,QAAM,eAAe,YAAY;AAC7B,iBAAa,IAAI;AACjB,UAAM,OAAO;AAAA,EACjB;AAEA,QAAM,eAAe,MAAM;AACvB,QAAI,CAAC,UAAU,UAAU,SAAS;AAC9B,YAAM,OAAO,UAAU,QAAQ,sBAAsB;AACrD,0BAAoB;AAAA,QAChB,KAAK,KAAK,SAAS;AAAA,QACnB,OAAO,OAAO,aAAa,KAAK;AAAA,MACpC,CAAC;AAAA,IACL;AACA,cAAU,CAAC,MAAM;AAAA,EACrB;AAGA,8BAAU,MAAM;AACZ,aAAS,mBAAmB,OAAmB;AAC3C,UACI,YAAY,WACZ,CAAC,YAAY,QAAQ,SAAS,MAAM,MAAc,KAClD,UAAU,WACV,CAAC,UAAU,QAAQ,SAAS,MAAM,MAAc,GAClD;AACE,kBAAU,KAAK;AAAA,MACnB;AAAA,IACJ;AACA,aAAS,iBAAiB,aAAa,kBAAkB;AACzD,WAAO,MAAM,SAAS,oBAAoB,aAAa,kBAAkB;AAAA,EAC7E,GAAG,CAAC,CAAC;AAEL,SACI,6CAAC,SAAI,WAAU,YACX;AAAA;AAAA,MAAC;AAAA;AAAA,QACG,KAAK;AAAA,QACL,SAAS;AAAA,QACT,WAAU;AAAA,QAGV;AAAA;AAAA,YAAC;AAAA;AAAA,cACG,WAAU;AAAA,cACV,MAAK;AAAA,cACL,SAAQ;AAAA,cAER,sDAAC,UAAK,GAAE,uOAAsO;AAAA;AAAA,UAClP;AAAA,UACC,YACG,4CAAC,UAAK,WAAU,yBAAyB,oBAAS;AAAA,UAGtD;AAAA,YAAC;AAAA;AAAA,cACG,WAAW,8CAA8C,SAAS,eAAe,EAAE;AAAA,cACnF,MAAK;AAAA,cACL,QAAO;AAAA,cACP,SAAQ;AAAA,cAER,sDAAC,UAAK,eAAc,SAAQ,gBAAe,SAAQ,aAAa,GAAG,GAAE,kBAAiB;AAAA;AAAA,UAC1F;AAAA;AAAA;AAAA,IACJ;AAAA,IAGC,UACG;AAAA,MAAC;AAAA;AAAA,QACG,KAAK;AAAA,QACL,OAAO,EAAE,KAAK,iBAAiB,KAAK,OAAO,iBAAiB,MAAM;AAAA,QAClE,WAAU;AAAA,QAEV;AAAA,UAAC;AAAA;AAAA,YACG,SAAS;AAAA,YACT,UAAU;AAAA,YACV,WAAU;AAAA,YAEV;AAAA;AAAA,gBAAC;AAAA;AAAA,kBACG,WAAU;AAAA,kBACV,MAAK;AAAA,kBACL,QAAO;AAAA,kBACP,SAAQ;AAAA,kBAER,sDAAC,UAAK,eAAc,SAAQ,gBAAe,SAAQ,aAAa,GAAG,GAAE,6FAA4F;AAAA;AAAA,cACrK;AAAA,cACC,YAAY,mBAAmB;AAAA;AAAA;AAAA,QACpC;AAAA;AAAA,IACJ;AAAA,KAER;AAER;AAGA,eAAe,SAAS;AAEpB,QAAM,MAAM,eAAe;AAAA,IACvB,QAAQ;AAAA,EACZ,CAAC;AAGD,eAAa,WAAW,cAAc;AAGtC,SAAO,SAAS,OAAO;AAC3B;","names":[]}